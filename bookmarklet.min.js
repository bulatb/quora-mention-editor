javascript:(function(){var%20j=%221.1%22,c=%22http://bochkariov.com/quora/edit-mentions/update%3Fversion=%22+j,g=%22http://bochkariov.com/quora/edit-mentions/bugs%3Fversion=%22+j,l={arrowNub:{%22background-position%22:%2210px%20top%22},prompt:{background:%22%23fdfdfd%22,padding:%2211px%22,width:%22auto%22},inputField:{background:%22%23f9f9f9%22,border:%221px%20solid%20%23bbb%22,display:%22block%22,padding:%222px%22},controls:{margin:%222px%200%200%200%22,overflow:%22auto%22,padding:%226px%204px%200%200%22},%22controls%20a:last-child%22:{color:%22%23777%22,%22float%22:%22right%22},%22controls:hover%20a:last-child%22:{display:%22inline%22,},%22controls:hover%20a:last-child:hover%22:{color:%22%2319558D%22,%22text-decoration%22:%22none%22},%22controls%20a:focus%22:{border:%220%22,outline:%22none%22},help:{display:%22none%22,margin:%220%22,padding:%226px%204px%200%200%22},%22help%20a%22:{color:%22%23777%22,%22font-size%22:%220.97em%22,},okButton:{display:%22block%22,%22float%22:%22left%22,margin:%22-1px%2010px%200%200%22,%22min-width%22:%220%22,padding:%221px%208px%22},cancelButton:{%22font-size%22:%220.97em%22,%22text-decoration%22:%22underline%22},%22.hidden%22:{display:%22none%22}},k=document.getSelection().focusNode,i=f(k),d=i.text();if(i.length!==0){e(i,function(m,n){m.text(n)},function(m){m.text(d)},function(m,n){m.text(n)})}function%20h(q,p){var%20o=%22%22,n;for(var%20m%20in%20q){if(q.hasOwnProperty(m)){n=q[m];if(m.charAt(0)===%22.%22){o+=m.replace(%22.%22,%22.%22+p)+%22{%22}else{o+=%22%23%22+p+m+%22{%22}for(var%20r%20in%20n){if(n.hasOwnProperty(r)){o+=r+%22:%22+n[r]+%22;%22}}o+=%22}%22}}return%20o}function%20b(n){var%20o,m=document.createRange(),p=document.createTextNode(%22%22);n.closest(%22.qtext_editor_content%22).focus();o=window.getSelection();if(o.rangeCount%3E0){o.removeAllRanges()}$(p).insertAfter(n);m.selectNodeContents(p);m.collapse(true);o.addRange(m)}function%20f(q){function%20p(){var%20t=m.endOffset===m.endContainer.length,s=$(m.endContainer.nextSibling).is(%22a%22);return%20t%26%26s}function%20o(){var%20t=m.startOffset===0,s=$(m.startContainer.previousSibling).is(%22a%22);return%20t%26%26s}var%20n=$(q),r=n.closest(%22a%22),m=window.getSelection().getRangeAt(0);if(q.nodeType===3){if(r.length===0){if(p()){return%20f(m.endContainer.nextSibling)}else{if(o()){return%20f(m.startContainer.previousSibling)}else{return%20new%20jQuery.fn.init()}}}else{return%20r}}else{if(n.is(%22a%22)){return%20n}else{return%20new%20jQuery.fn.init()}}}function%20a(m){return('%3Cdiv%20class=%22hover_menu%22%3E%3Cdiv%20id=%22arrowNub%22%20class=%22hover_menu_nub%22%3E%3C/div%3E%3Cdiv%20id=%22prompt%22%20class=%22hover_menu_contents%22%3E%3Cinput%20id=%22inputField%22%20type=%22text%22%20/%3E%3Cdiv%20id=%22controls%22%3E%3Ca%20id=%22okButton%22%20href=%22%23%22%20class=%22submit_button%22%3ESave%3C/a%3E%3Ca%20id=%22cancelButton%22%20href=%22%23%22%20title=%22Undo%20changes%20and%20close%22%3ECancel%3C/a%3E%3Ca%20id=%22helpToggle%22%20class=%22%25ns%25hidden%22%20href=%22%23%22%3E+%3C/a%3E%3C/div%3E%3Cdiv%20id=%22help%22%3E%3Ca%20href=%22'+c+'%22%20title=%22You%20have%20version%20'+j+'%22%20target=%22_%25ns%25_update%22%3ECheck%20for%20updates%3C/a%3E%3Cbr/%3E%3Ca%20href=%22'+g+'%22%20target=%22_%25ns%25_issues%22%3EReport%20bug%3C/a%3E%3C/div%3E%3C/div%3E%3C/div%3E').replace(/id=%22/g,'id=%22'+m).replace(/%25ns%25/g,m)}function%20e(t,x,w,z){function%20n(A){return%22%23%22+r+A}function%20m(){var%20A=t.offset();y.css({position:%22absolute%22,top:A.top+t.outerHeight()+2,left:A.left})}function%20q(){y.fadeOut(%22fast%22,function(){y.remove();$(n(%22style%22)).remove();t.css({background:%22%23fff%22});b(t)});u.unbind(%22.%22+r);t.closest(%22.qtext_editor_content%22).unbind(%22.%22+r)}var%20r=%22qp_%22+(+new%20Date())+%22__%22,y=$(a(r)),p=y.find(%22input%22),v,o,u,s;$(%22head%22).append($('%3Cstyle%20type=%22text/css%22%3E'+h(l,r)+%22%3C/style%3E%22,{id:r+%22style%22}));t.css({background:%22%23ffff80%22});m();y.appendTo(%22body%22);p.val(t.text()).select();v=y.find(%22.hover_menu_contents%22).find(%22a%22).first();o=v.next();u=t.closest(%22.inline_editor_form%22).find(%22.inline_editor_cancel_button%22);s=y.find(n(%22helpToggle%22));p.keyup(function(A){if(A.which===13){x(t,p.val());q()}else{if(A.which===27){w(t,p.val());q()}else{typeof%20z===%22function%22%26%26z(t,p.val())}}});v.click(function(){x(t,p.val());q();return%20false});o.click(function(){w(t);q();return%20false});u.bind(%22click.%22+r,function(){w(t);q()});t.closest(%22.qtext_editor_content%22).bind(%22keyup.%22+r,m).bind(%22keydown.%22+r,function(){var%20A=document.getSelection().focusNode,B=t.length!==0;if(B%26%26f(A).get(0)===t.get(0)){return%20false}});s.toggle(function(){$(n(%22help%22)).slideDown(%22fast%22);$(this).text(%22\u00d7%22).removeClass(r+%22hidden%22);return%20false},function(){$(n(%22help%22)).slideUp(%22fast%22);$(this).text(%22+%22).addClass(r+%22hidden%22);return%20false});return%20y}})();